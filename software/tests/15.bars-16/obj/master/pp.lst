ca65 V2.17 - Git 9299e550a
Main file   : obj/master/pp.s1
Current file: obj/master/pp.s1

000000r 1               ;
000000r 1               ; Generated with ap65 v 1.00
000000r 1               ;
000000r 1               .setcpu     "65816"
000000r 1               .smart      on
000000r 1               .autoimport on
000000r 1               .case       on
000000r 1               .importzp   sp, sreg, regsave, regbank
000000r 1               .importzp   tmp1, tmp2, tmp3, tmp4
000000r 1               .importzp   ptr1, ptr2, ptr3, ptr4
000000r 1               ;
000000r 1               .zeropage
000000r 1               zpp =  $90
000000r 1               zptr =  zpp+0
000000r 1               zcmd =  zpp+2
000000r 1               zflg =  zpp+3
000000r 1               zdst =  zpp+4
000000r 1               zsiz =  zpp+6
000000r 1               zsrc =  zpp+8
000000r 1               .code
000000r 1               __pp_cmd_ptr:
000000r 1  00 00        .word 0
000002r 1               pp_save_via_ier:
000002r 1  00           .byte 0
000003r 1               pp_save_via_acr:
000003r 1  00           .byte 0
000004r 1               pp_save_via_pcr:
000004r 1  00           .byte 0
000005r 1               pp_save_via_ddra:
000005r 1  00           .byte 0
000006r 1               pp_save_via_ddrb:
000006r 1  00           .byte 0
000007r 1               pp_save_via_a:
000007r 1  00           .byte 0
000008r 1               pp_save_via_b:
000008r 1  00           .byte 0
000009r 1               pp_save_y:
000009r 1  00           .byte 0
00000Ar 1               __pp_send:
00000Ar 1  08           php
00000Br 1  78           sei
00000Cr 1  8C rr rr     sty pp_save_y
00000Fr 1  20 rr rr     jsr pp_setup_master
000012r 1  AD rr rr     lda __pp_cmd_ptr
000015r 1  85 90        sta zptr
000017r 1  AD rr rr     lda __pp_cmd_ptr+1
00001Ar 1  85 91        sta zptr+1
00001Cr 1  A0 00        ldy #$00
00001Er 1               txl_1:
00001Er 1  B1 90        lda (zptr),y
000020r 1  99 92 00     sta zcmd,y
000023r 1  C8           iny
000024r 1  C0 08        cpy #$08
000026r 1  D0 F6        bne txl_1
000028r 1  A0 07        ldy #$07
00002Ar 1  A9 55        lda #$55
00002Cr 1               tx_syn:
00002Cr 1  20 rr rr     jsr pp_out_put_byte
00002Fr 1  88           dey
000030r 1  D0 FA        bne tx_syn
000032r 1  A9 AA        lda #$aa
000034r 1  20 rr rr     jsr pp_out_put_byte
000037r 1  A0 00        ldy #$00
000039r 1               tx_hdr:
000039r 1  B1 90        lda (zptr),y
00003Br 1  20 rr rr     jsr pp_out_put_byte
00003Er 1  C8           iny
00003Fr 1  C0 06        cpy #$06
000041r 1  D0 F6        bne tx_hdr
000043r 1  A0 00        ldy #$00
000045r 1               tx_cont:
000045r 1  B1 98        lda (zsrc),y
000047r 1  20 rr rr     jsr pp_out_put_byte
00004Ar 1  E6 98        inc zsrc
00004Cr 1  D0 02        bne txs_1
00004Er 1  E6 99        inc zsrc+1
000050r 1               txs_1:
000050r 1  C6 96        dec zsiz
000052r 1  D0 F1        bne tx_cont
000054r 1  A5 97        lda zsiz+1
000056r 1  F0 05        beq txs_2
000058r 1  C6 97        dec zsiz+1
00005Ar 1  4C rr rr     jmp tx_cont
00005Dr 1               txs_2:
00005Dr 1  20 rr rr     jsr pp_reset
000060r 1  AC rr rr     ldy pp_save_y
000063r 1  28           plp
000064r 1  60           rts
000065r 1               pp_setup_master:
000065r 1  AD 0E 03     lda $030e
000068r 1  8D rr rr     sta pp_save_via_ier
00006Br 1  A9 7F        lda #%01111111
00006Dr 1  8D 0E 03     sta $030e
000070r 1  8D 0D 03     sta $030d
000073r 1  AD 00 03     lda $0300
000076r 1  8D rr rr     sta pp_save_via_b
000079r 1  09 10        ora #%00010000
00007Br 1  8D 00 03     sta $0300
00007Er 1  AD 02 03     lda $0302
000081r 1  8D rr rr     sta pp_save_via_ddrb
000084r 1  09 10        ora #%00010000
000086r 1  8D 02 03     sta $0302
000089r 1  AD 0C 03     lda $030c
00008Cr 1  8D rr rr     sta pp_save_via_pcr
00008Fr 1  09 01        ora #%00000001
000091r 1  8D 0C 03     sta $030c
000094r 1  AD 01 03     lda $0301
000097r 1  8D rr rr     sta pp_save_via_a
00009Ar 1  AD 03 03     lda $0303
00009Dr 1  8D rr rr     sta pp_save_via_ddra
0000A0r 1  A9 FF        lda #%11111111
0000A2r 1  8D 03 03     sta $0303
0000A5r 1  8D 01 03     sta $0301
0000A8r 1  AD 0B 03     lda $030b
0000ABr 1  8D rr rr     sta pp_save_via_acr
0000AEr 1  29 FC        and #%11111100
0000B0r 1  8D 0B 03     sta $030b
0000B3r 1  20 rr rr     jsr _set_pp_out
0000B6r 1  20 rr rr     jsr _set_pp_on
0000B9r 1  60           rts
0000BAr 1               pp_out_put_byte:
0000BAr 1  48           pha
0000BBr 1  8D 01 03     sta $0301
0000BEr 1  AD 00 03     lda $0300
0000C1r 1  29 EF        and #%11101111
0000C3r 1  8D 00 03     sta $0300
0000C6r 1  A9 02        lda #(1<<1)
0000C8r 1               lp_opb:
0000C8r 1  2C 0D 03     bit $030d
0000CBr 1  F0 FB        beq lp_opb
0000CDr 1  AD 00 03     lda $0300
0000D0r 1  09 10        ora #%00010000
0000D2r 1  8D 00 03     sta $0300
0000D5r 1  68           pla
0000D6r 1  60           rts
0000D7r 1               pp_out_setup_receive:
0000D7r 1  60           rts
0000D8r 1               pp_out_get_byte:
0000D8r 1  60           rts
0000D9r 1               pp_reset:
0000D9r 1  20 rr rr     jsr _set_pp_off
0000DCr 1  20 rr rr     jsr _set_pp_out
0000DFr 1  AD rr rr     lda pp_save_via_b
0000E2r 1  8D 00 03     sta $0300
0000E5r 1  AD rr rr     lda pp_save_via_ddrb
0000E8r 1  8D 02 03     sta $0302
0000EBr 1  AD rr rr     lda pp_save_via_a
0000EEr 1  8D 01 03     sta $0301
0000F1r 1  AD rr rr     lda pp_save_via_ddra
0000F4r 1  8D 03 03     sta $0303
0000F7r 1  AD rr rr     lda pp_save_via_pcr
0000FAr 1  8D 0C 03     sta $030c
0000FDr 1  AD rr rr     lda pp_save_via_acr
000100r 1  8D 0B 03     sta $030b
000103r 1  A9 7F        lda #%01111111
000105r 1  8D 0E 03     sta $030e
000108r 1  8D 0D 03     sta $030d
00010Br 1  AD rr rr     lda pp_save_via_ier
00010Er 1  09 80        ora #$80
000110r 1  8D 0E 03     sta $030e
000113r 1  60           rts
000114r 1               .export __pp_cmd_ptr
000114r 1               .export __pp_send
000114r 1               
